// // THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB
package spacetimedb

import (
	"github.com/clockworklabs/SpacetimeDB/crates/bindings-go/pkg/spacetimedb"
)

// ClearResults is a SpacetimeDB reducer
// Clears all test results from the bsatn_test_result table
func ClearResults(ctx *spacetimedb.ReducerContext) error {
	// Query all entries from the table and delete them
	iter, err := ctx.Iter("bsatn_test_result")
	if err != nil {
		return err
	}
	defer iter.Close()

	for iter.Next() {
		var result BsatnTestResult
		if err := iter.Read(&result); err != nil {
			return err
		}

		// Delete this entry
		if err := ctx.DeleteByID("bsatn_test_result", result.Id); err != nil {
			return err
		}
	}

	return iter.Err()
}

// RegisterClearResults registers the clear_results reducer with SpacetimeDB
func RegisterClearResults() {
	spacetimedb.RegisterSimpleReducerNoArgs("clear_results", "ClearResults", func(ctx *spacetimedb.ReducerContext) spacetimedb.ReducerResult {
		if err := ClearResults(ctx); err != nil {
			return spacetimedb.ReducerResult{Error: err}
		}
		return spacetimedb.ReducerResult{}
	})
}
